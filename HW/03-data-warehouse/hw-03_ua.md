## Домашнє завдання на тиждень 3

**Важлива замітка:** Для цього домашнього завдання ми будемо використовувати файл паркету Green Taxi Trip Record з даними про таксі у місті Нью-Йорк, які можна знайти [тут](https://www.nyc.gov/site/tlc/about/tlc-trip-record-data.page). Якщо ви використовуєте оркестрацію, таку як Mage, Airflow або Prefect, не завантажуйте дані в BigQuery за допомогою оркестратора. Зупиніться на завантаженні файлів до відповідного бакету.

**ПРИМІТКА:** Вам потрібно використовувати опцію файлів PARQUET при створенні зовнішньої таблиці.

**НАЛАГОДЖЕННЯ:**

Створіть зовнішню таблицю, використовуючи дані Green Taxi Trip Records за 2022 рік.
Створіть таблицю в BQ, використовуючи дані Green Taxi Trip Records за 2022 рік (не розподіляйте або кластеризуйте цю таблицю).

## Питання 1:

Питання 1: Скільки записів у даних зеленого таксі за 2022 рік?
- 65,623,481
- 840,402
- 1,936,423
- 253,647

## Питання 2:

Напишіть запит для підрахунку відмінної кількості PULocationID для всього набору даних на обох таблицях.
Який орієнтовний обсяг даних буде зчитано при виконанні цього запиту на зовнішній таблиці та таблиці?

- 0 МБ для зовнішньої таблиці і 6,41 МБ для матеріалізованої таблиці
- 18,82 МБ для зовнішньої таблиці і 47,60 МБ для матеріалізованої таблиці
- 0 МБ для зовнішньої таблиці і 0 МБ для матеріалізованої таблиці
- 2,14 МБ для зовнішньої таблиці і 0 МБ для матеріалізованої таблиці

## Питання 3:

Скільки записів мають fare_amount рівним 0?
- 12,488
- 128,219
- 112
- 1,622

## Питання 4:

Яка найкраща стратегія для створення оптимізованої таблиці в Big Query, якщо ваш запит завжди сортує результати за PUlocationID та фільтрує за lpep_pickup_datetime?
- Кластеризувати за lpep_pickup_datetime і Розподілити за PUlocationID
- Розподілити за lpep_pickup_datetime та Кластеризувати за PUlocationID
- Розподілити за lpep_pickup_datetime та Розподілити за PUlocationID
- Кластеризувати за lpep_pickup_datetime та Кластеризувати за PUlocationID

## Питання 5:

Напишіть запит для отримання відмінних PULocationID між lpep_pickup_datetime 06/01/2022 та 06/30/2022 (включно). Використовуйте таблицю, яку ви створили раніше у вашому запиті, і зауважте орієнтований обсяг байтів. Тепер змініть таблицю у фразі from на таблицю з розподіленими даними, яку ви створили для питання 4, і зауважте орієнтований обсяг оброблених байтів. Які ці значення?
Виберіть відповідь, яка найближче відповідає.

- 22.82 МБ для нерозподіленої таблиці і 647.87 МБ для розподіленої таблиці
- 12.82 МБ для нерозподіленої таблиці і 1.12 МБ для розподіленої таблиці
- 5.63 МБ для нерозподіленої таблиці і 0 МБ для розподіленої таблиці
- 10.31 МБ для нерозподіленої таблиці і 10.31 МБ для розподіленої таблиці

## Питання 6:

Де зберігаються дані у зовнішній таблиці, яку ви створили?

- Big Query
- Бакет GCP
- Big Table
- Реєстр контейнерів

## Питання 7:

У Big Query завжди кластеризувати ваші дані - це найкраща практика:

- Так
- Ні

## (Бонус: Не приносить балів) Питання 8:

Б

ез балів: Напишіть запит SELECT count(*) FROM матеріалізованої таблиці, яку ви створили. Скільки байтів оцінюється буде прочитано? Чому?

Примітка: Типи стовпців для всіх файлів, що використовуються в зовнішній таблиці, повинні мати однаковий тип даних. Водночас зовнішню таблицю можна створити та показати в бічній панелі в Big Query, але це потрібно перевірити, запустивши запит на підрахунок кількості в розподіленій таблиці, щоб перевірити, чи виникають помилки.
